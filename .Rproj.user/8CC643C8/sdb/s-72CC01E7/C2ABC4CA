{
    "collab_server" : "",
    "contents" : "#Reshape AUSPRICER data\n\nAR5 <- as.tibble(AR5R)\n\nAR5 <- AR5 %>% gather(`2020`,`2030`,`2040`, `2050`, key = \"year\", value =\"price\")\n\nAR5$year <- as.numeric(AR5$year)\n\n\nAR5a <-qplot(year, price, data=AR5, geom = \"line\", color = ModelScenario) + \n  labs(x = \"Year\", y = bquote('2016 AUD/t'~CO[2]~'-e')) +\n  scale_x_continuous(breaks = seq(2020, 2050, by = 5)) +\n  scale_y_continuous(breaks = seq(0,1600, by = 100)) +\n theme(legend.title=element_blank()) +\n theme(legend.position=\"bottom\") +\n  theme(legend.text = element_text(size=7)) +\ntheme(axis.text = element_text(size=7))\n\n#  IQR ribbon with median/trimmed mean line (note year must be numeric)\n\niqr <- function(x, ...) {qs <- quantile(as.numeric(x), c(0.25, 0.75), na.rm = T)\nnames(qs) <- c(\"ymin\", \"ymax\")\nqs\n}\n\n#0.25 trim to establish the interquartile mean (used by the London Interbank Offered Rate - see Wikipedia)\n\nIQmean <- function(x, ...) {md1 <- mean(as.numeric(x), trim = 0.25, na.rm = TRUE)\nmd1\n} \n\n#Code for IQR ribbon with IQmean\nAR5rib <- ggplot(AR5, aes(year, price)) +\n  stat_summary(fun.data = \"iqr\", geom = \"ribbon\", fill = alpha(\"blue\", 1/5)) +\n  stat_summary(aes(year), fun.y = IQmean, geom = \"line\", color = \"black\") +\n  labs(x = \"Year\", y = bquote('2016 AUD/t'~CO[2]~'-e')) +\n scale_x_continuous(breaks = seq(2020, 2050, by = 5)) +\n scale_y_continuous(breaks = seq(0,1200, by = 50)) +\ntheme(axis.text = element_text(size=7)) #+\n# theme(legend.title=element_blank()) +\n# theme(legend.position=\"bottom\")\n\n#Code for faceted selection of charts one for each price series\nAR5facet <- qplot(year, price, data = AR5, geom = \"line\", group = ModelScenario) + facet_wrap(~ModelScenario) +\n  labs(x = \"Year\", y = bquote('2016 AUD/t'~CO[2]~'-e')) +\n  scale_x_continuous(breaks = pretty(cpricefin$year, n=5)) +\n   theme(axis.text.x = element_text(angle=45, vjust=0.8, hjust=0.8)) +\n  theme(axis.text = element_text(size=7)) \n\n#Code to put faceted charts and ribbon on a single page.\nmultiplot(AR5a, AR5facet, AR5rib, cols=1)\n\n#Create table of values to parallel chart\n\nsumdatallfin <- cpricefin %>% \n  group_by(year) %>% \n  summarise(\n    count = n(),\n    Q1 = quantile(priceAUD2016, c(0.25), na.rm = TRUE),\n    IQmean = mean(priceAUD2016, trim = 0.25, na.rm = TRUE),\n    Q3 = quantile(priceAUD2016, c(0.75), na.rm = TRUE)\n  )",
    "created" : 1503370508774.000,
    "dirty" : true,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "742720970",
    "id" : "C2ABC4CA",
    "lastKnownWriteTime" : 1505444381,
    "last_content_update" : 1505981916309,
    "path" : "~/Documents/GitHub/R-repository-test/R-test/AR5 code.R",
    "project_path" : "AR5 code.R",
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}