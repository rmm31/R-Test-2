{
    "collab_server" : "",
    "contents" : "#Reshape AUSPRICER data\n\nALPR_price <- as.tibble(LPF_ausprice)\n\nALPR_price <- ALPR_price %>% gather(\"CPRS_5\", \"CPRS_15\", \"Garnaut_10\", \"Garnaut_25\", key = \"source\", value =\"priceAUD2016\")\n\n#Combine AUSPRICE data with SGLP 2010 modelling\n\nauspriceall <- rbind(ALPR_price, SGLP_price1)\n\n#  IQR ribbon with median/trimmed mean line (note year must be numeric)\n\niqr <- function(x, ...) {qs <- quantile(as.numeric(x), c(0.25, 0.75), na.rm = T)\nnames(qs) <- c(\"ymin\", \"ymax\")\nqs\n}\n\n#0.25 trim to establish the interquartile mean (used by the London Interbank Offered Rate - see Wikipedia)\n\nIQmean <- function(x, ...) {md1 <- mean(as.numeric(x), trim = 0.25, na.rm = TRUE)\nmd1\n} \n\n#Code for IQR ribbon with IQmean\nallribbon <- ggplot(auspriceall, aes(year, priceAUD2016)) +\n  stat_summary(fun.data = \"median_hilow\", geom = \"ribbon\", fill = alpha(\"green\", 1/5)) +\n  stat_summary(fun.data = \"iqr\", geom = \"ribbon\", fill = alpha(\"blue\", 1/5)) +\n  stat_summary(aes(year), fun.y = IQmean, geom = \"line\", color = \"black\") +\n  stat_summary(aes(year), fun.y = median, geom = \"line\", color = \"red\") +\n  labs(x = \"Year\", y = bquote('2016 AUD/t'~CO[2]~'e or t'~CO[2])) +\n  scale_x_continuous(breaks = seq(2010, 2050, by = 5)) +\n  scale_y_continuous(breaks = seq(0,800, by = 25)) +\n  theme(axis.text = element_text(size=7)) #+\n# theme(legend.title=element_blank()) +\n# theme(legend.position=\"bottom\")\n\n#Code for faceted selection of charts one for each price series\nausallfacet <- qplot(year, priceAUD2016, data = auspriceall, geom = \"line\", group = source) + facet_wrap(~source, labeller = as_labeller(facet_names)) +\n  labs(x = \"Year\", y = bquote('2016 AUD/t'~CO[2]~'e or t'~CO[2])) +\n  scale_x_continuous(breaks = pretty(cpricefin$year, n=5)) +\n  theme(axis.text.x = element_text(angle=45, vjust=0.8, hjust=0.8)) +\n  theme(axis.text = element_text(size=7)) +\n  theme(strip.text.x = element_text(size = 7))\n#Code to change names for facets\nfacet_names <- c(\n  `CPRS_15` = \"CPRS -15 Aust Emissions Price\",\n  `CPRS_5` = \"CPRS -5 Aust Emissions Price\",\n  `Garnaut_25` = \"Garnaut -25 Aust Emissions Price\",\n  `Garnaut_10` = \"Garnaut -10 Aust Emissions Price\",\n  `SGLP_core` = \"Strong Growth, Low Pollution Core\",\n  `Clean_Energy_Future` = \"Strong Growth, Low Pollution Clean Energy Future\",\n  `Government_policy` = \"Strong Growth, Low Pollution Government Policy\",\n  `High_price_scenario` = \"Strong Growth, Low Pollution High Price\"\n)\n#Code to put faceted charts and ribbon on a single page.\nmultiplot(Govmod, allfacet, allribbon,cols=1)\n\n#Create table of values to parallel chart\n\nsumdatallausfin <- auspriceall %>% \n  group_by(year) %>% \n  summarise(\n    count = n(),\n    Min = quantile(priceAUD2016, c(0.0), na.rm = TRUE),\n    Quan05 = quantile(priceAUD2016, c(0.05), na.rm = TRUE),\n    Quan10 = quantile(priceAUD2016, c(0.1), na.rm = TRUE),\n    Quan15 = quantile(priceAUD2016, c(0.15), na.rm = TRUE),\n    Q1 = quantile(priceAUD2016, c(0.25), na.rm = TRUE),\n    IQmean = mean(priceAUD2016, trim = 0.25, na.rm = TRUE),\n    Q3 = quantile(priceAUD2016, c(0.75), na.rm = TRUE),\n    Quan85 = quantile(priceAUD2016, c(0.85), na.rm = TRUE),\n    Quan90 = quantile(priceAUD2016, c(0.90), na.rm = TRUE),\n    Quan95 = quantile(priceAUD2016, c(0.95), na.rm = TRUE),\n    Max = quantile(priceAUD2016, c(1.0), na.rm = TRUE)\n  )\n\n\n# Code for line chart\n\nauspriceline <-qplot(year, priceAUD2016, data=auspriceall, geom = \"line\", color = source) + \n  labs(x = \"Year\", y = bquote('2016 AUD/t'~CO[2]~'e')) +\n  scale_x_continuous(breaks = seq(2010, 2050, by = 5)) +\n  scale_y_continuous(breaks = seq(0,800, by = 50), sec.axis = dup_axis()) +\n  theme_bw () +\n  theme(legend.title=element_blank()) +\n  theme(legend.position=\"bottom\") +\n  theme(legend.text = element_text(size=7)) +\n  theme(axis.text = element_text(size=7)) +\n  theme(panel.grid.major.x = element_blank(), panel.grid.major.y =  element_blank()) +\n  theme(panel.grid.minor.x = element_blank(), panel.grid.minor.y =  element_blank()) +\n  theme(legend.title=element_blank()) +\n  theme(legend.position=\"bottom\") ",
    "created" : 1503370594933.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "4291221017",
    "id" : "240D6279",
    "lastKnownWriteTime" : 1503369936,
    "last_content_update" : 1503369936,
    "path" : "~/Documents/Work/Point advisory/DELWP (Carbon price)/Pricing options - data and visualisations/R Data/Aus Price code.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 5,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}